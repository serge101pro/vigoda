import { create } from 'zustand';
import { persist } from 'zustand/middleware';

export type Language = 'ru' | 'en' | 'es';

interface I18nState {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

// Get system language
const getSystemLanguage = (): Language => {
  const browserLang = navigator.language.split('-')[0];
  if (browserLang === 'en') return 'en';
  if (browserLang === 'es') return 'es';
  return 'ru';
};

export const translations: Record<Language, Record<string, string>> = {
  ru: {
    // Navigation
    'nav.home': 'Главная',
    'nav.catalog': 'Каталог',
    'nav.recipes': 'Рецепты',
    'nav.ready': 'Готовое',
    'nav.catering': 'Кейтеринг',
    'nav.cart': 'Корзина',
    'nav.profile': 'Профиль',
    'nav.favorites': 'Избранное',
    
    // Header
    'header.delivery': 'Доставка в',
    'header.selectAddress': 'Выберите адрес',
    'header.nearestStores': 'Ближайшие магазины',
    
    // Auth
    'auth.login': 'Войти',
    'auth.register': 'Регистрация',
    'auth.logout': 'Выйти',
    'auth.email': 'Email',
    'auth.password': 'Пароль',
    'auth.name': 'Имя',
    'auth.forgotPassword': 'Забыли пароль?',
    'auth.noAccount': 'Нет аккаунта?',
    'auth.hasAccount': 'Уже есть аккаунт?',
    'auth.createAccount': 'Создать аккаунт',
    'auth.registerSuccess': 'Регистрация успешна!',
    'auth.checkEmail': 'Проверьте почту для подтверждения аккаунта',
    'auth.error': 'Ошибка',
    'auth.passwordMin': 'Пароль должен содержать минимум 6 символов',
    'auth.accountError': 'Не удалось создать аккаунт. Попробуйте другой email.',
    'auth.termsAgree': 'Регистрируясь, вы соглашаетесь с',
    'auth.terms': 'условиями использования',
    'auth.and': 'и',
    'auth.privacy': 'политикой конфиденциальности',
    'auth.creating': 'Создание...',
    
    // Home
    'home.search': 'Поиск товаров...',
    'home.savings': 'Экономия',
    'home.bonuses': 'Бонусы',
    'home.available': 'доступно',
    'home.wantMore': 'Хочу больше',
    'home.get': 'Получить',
    'home.yourRecipes': 'Ваши рецепты',
    'home.andSubscriptions': 'и подписки',
    'home.dailyDeals': 'Скидки дня',
    'home.upTo50': 'До 50% на популярные товары!',
    'home.view': 'Смотреть',
    'home.collapse': 'Свернуть',
    'home.expand': 'Развернуть',
    'home.all': 'все',
    'home.popular': 'Популярные товары',
    'home.farmProducts': 'Фермерские/Эко продукты',
    'home.sales': 'Акции',
    'home.readyMeals': 'Готовые блюда и рационы питания',
    'home.saveTime': 'Экономьте время на готовку!',
    'home.details': 'Подробнее',
    'home.popularMeals': 'Популярные блюда',
    'home.mealPlans': 'Готовые рационы',
    'home.cateringTitle': 'Кейтеринг',
    'home.forHome': 'На дом',
    'home.forOffice': 'В офис',
    'home.themed': 'Тематические',
    'home.culinaryClub': 'Клуб Кулинаров',
    'home.challengesPrizes': 'Челленджи, рейтинги, призы',
    'home.stores': 'Магазины',
    'home.storesDesc': 'Сетевые и локальные',
    'home.farms': 'Фермы',
    'home.farmsDesc': 'Свежее от фермеров',
    'home.forPets': 'Для питомцев',
    'home.popularPets': 'Популярное для питомцев',
    
    // Referral
    'referral.inviteFriends': 'Приглашай друзей — получай бонусы!',
    'referral.title': 'Партнёрская программа',
    'referral.description': 'Приглашайте друзей и получайте бонусы за каждого!',
    'referral.yourLink': 'Ваша ссылка',
    'referral.copy': 'Скопировать',
    'referral.copied': 'Скопировано!',
    'referral.share': 'Поделиться',
    'referral.yourStats': 'Ваша статистика',
    'referral.invited': 'Приглашено',
    'referral.active': 'Активных',
    'referral.earned': 'Заработано',
    'referral.bestPartner': 'Лучший партнёр',
    'referral.friends': 'друзей',
    'referral.goToProgram': 'Подробнее о программе',
    
    // Profile
    'profile.settings': 'Настройки',
    'profile.premium': 'Премиум',
    'profile.orders': 'Заказы',
    'profile.addresses': 'Адреса',
    'profile.lists': 'Списки покупок',
    'profile.loyaltyCards': 'Карты лояльности',
    'profile.analytics': 'Аналитика',
    'profile.awards': 'Достижения',
    'profile.recipes': 'Рецепты',
    'profile.affiliate': 'Партнёрская программа',
    'profile.family': 'Семья',
    'profile.support': 'Поддержка',
    
    // Settings
    'settings.title': 'Настройки',
    'settings.account': 'Настройки аккаунта',
    'settings.name': 'Имя',
    'settings.email': 'Email',
    'settings.phone': 'Телефон',
    'settings.language': 'Язык',
    'settings.notifications': 'Уведомления',
    'settings.push': 'Push-уведомления',
    'settings.emailNotif': 'Email-уведомления',
    'settings.shoppingReminder': 'Напоминания о покупках',
    'settings.discountNotify': 'Уведомления о скидках',
    'settings.priceRise': 'Оповещать о росте цен',
    'settings.familyUpdates': 'Семейные обновления',
    'settings.availableFamily': 'Доступно в Family плане',
    'settings.recommendations': 'Рекомендации товаров',
    'settings.cheapest': 'Самые дешёвые',
    'settings.cheapestDesc': 'Показывать товары с минимальной ценой',
    'settings.previous': 'Ранее купленные',
    'settings.previousDesc': 'Товары из вашей истории покупок',
    'settings.popularOthers': 'Популярные у других',
    'settings.popularOthersDesc': 'Что чаще всего покупают пользователи',
    'settings.premiumQuality': 'Премиум качество',
    'settings.premiumQualityDesc': 'Товары высокого качества',
    'settings.eco': 'Экологичные',
    'settings.ecoDesc': 'Органические и фермерские продукты',
    'settings.showCheaper': 'Показывать аналоги дешевле',
    'settings.notifyPriceRise': 'Уведомлять о росте цен',
    'settings.preferences': 'Предпочтения покупок',
    'settings.favoriteStores': 'Любимые магазины',
    'settings.dietary': 'Диетические ограничения',
    'settings.vegetarian': 'Вегетарианство',
    'settings.vegan': 'Веганство',
    'settings.glutenFree': 'Без глютена',
    'settings.lactoseFree': 'Без лактозы',
    'settings.monthlyBudget': 'Месячный бюджет',
    'settings.autoPredictions': 'Автодобавление предсказаний',
    'settings.autoPredictionsDesc': 'AI автоматически добавляет часто покупаемые товары',
    'settings.privacy': 'Конфиденциальность',
    'settings.anonymousStats': 'Анонимная статистика',
    'settings.anonymousStatsDesc': 'Помогает улучшить приложение',
    'settings.personalRecs': 'Персональные рекомендации',
    'settings.geolocation': 'Геолокация',
    'settings.geolocationDesc': 'Для поиска ближайших магазинов',
    'settings.deleteAccount': 'Удалить аккаунт',
    'settings.subscription': 'Управление подпиской',
    'settings.currentPlan': 'Текущий план',
    'settings.free': 'Бесплатная',
    'settings.viewPlans': 'Посмотреть планы',
    'settings.about': 'О приложении',
    'settings.termsOfUse': 'Условия использования',
    'settings.privacyPolicy': 'Политика конфиденциальности',
    'settings.helpSupport': 'Помощь и поддержка',
    'settings.personalDataPolicy': 'Политика обработки персональных данных',
    'settings.publicOffer': 'Публичная оферта',
    'settings.recRules': 'Правила рекомендательных технологий',
    'settings.contactUs': 'Связаться с нами:',
    
    // Recipes
    'recipes.title': 'Рецепты',
    'recipes.your': 'Ваши рецепты',
    'recipes.subscriptions': 'Ваши подписки',
    'recipes.new': 'Новый рецепт',
    'recipes.edit': 'Редактировать рецепт',
    'recipes.noRecipes': 'У вас пока нет рецептов',
    'recipes.create': 'Создать рецепт',
    'recipes.noSubscriptions': 'Вы пока ни на кого не подписаны',
    'recipes.checkRecommended': 'Посмотрите рекомендуемые рецепты:',
    'recipes.recommended': 'Рекомендуемые рецепты',
    'recipes.newRecipes': 'Новые рецепты',
    'recipes.recipeName': 'Название',
    'recipes.description': 'Описание',
    'recipes.time': 'Время (мин)',
    'recipes.servings': 'Порций',
    'recipes.calories': 'Калории',
    'recipes.difficulty': 'Сложность',
    'recipes.easy': 'Легко',
    'recipes.medium': 'Средне',
    'recipes.hard': 'Сложно',
    'recipes.cancel': 'Отмена',
    'recipes.save': 'Сохранить',
    'recipes.loading': 'Загрузка...',
    'recipes.min': 'мин',
    'recipes.addToFavorites': 'В избранное',
    'recipes.addIngredients': 'Добавить ингредиенты',
    
    // Cart
    'cart.title': 'Корзина',
    'cart.empty': 'Корзина пуста',
    'cart.total': 'Итого',
    'cart.checkout': 'Оформить заказ',
    'cart.clear': 'Очистить',
    
    // Common
    'common.loading': 'Загрузка...',
    'common.error': 'Ошибка',
    'common.success': 'Успешно',
    'common.cancel': 'Отмена',
    'common.save': 'Сохранить',
    'common.delete': 'Удалить',
    'common.edit': 'Редактировать',
    'common.add': 'Добавить',
    'common.back': 'Назад',
    'common.next': 'Далее',
    'common.close': 'Закрыть',
    'common.search': 'Поиск',
    'common.filter': 'Фильтр',
    'common.sort': 'Сортировка',
    'common.all': 'Все',
    'common.in': 'в',
    'common.rub': '₽',
  },
  en: {
    // Navigation
    'nav.home': 'Home',
    'nav.catalog': 'Catalog',
    'nav.recipes': 'Recipes',
    'nav.ready': 'Ready',
    'nav.catering': 'Catering',
    'nav.cart': 'Cart',
    'nav.profile': 'Profile',
    'nav.favorites': 'Favorites',
    
    // Header
    'header.delivery': 'Delivery to',
    'header.selectAddress': 'Select address',
    'header.nearestStores': 'Nearest stores',
    
    // Auth
    'auth.login': 'Log in',
    'auth.register': 'Register',
    'auth.logout': 'Log out',
    'auth.email': 'Email',
    'auth.password': 'Password',
    'auth.name': 'Name',
    'auth.forgotPassword': 'Forgot password?',
    'auth.noAccount': "Don't have an account?",
    'auth.hasAccount': 'Already have an account?',
    'auth.createAccount': 'Create account',
    'auth.registerSuccess': 'Registration successful!',
    'auth.checkEmail': 'Check your email to confirm your account',
    'auth.error': 'Error',
    'auth.passwordMin': 'Password must be at least 6 characters',
    'auth.accountError': 'Could not create account. Try another email.',
    'auth.termsAgree': 'By registering, you agree to',
    'auth.terms': 'terms of service',
    'auth.and': 'and',
    'auth.privacy': 'privacy policy',
    'auth.creating': 'Creating...',
    
    // Home
    'home.search': 'Search products...',
    'home.savings': 'Savings',
    'home.bonuses': 'Bonuses',
    'home.available': 'available',
    'home.wantMore': 'Want more',
    'home.get': 'Get',
    'home.yourRecipes': 'Your recipes',
    'home.andSubscriptions': 'and subscriptions',
    'home.dailyDeals': 'Daily deals',
    'home.upTo50': 'Up to 50% off popular items!',
    'home.view': 'View',
    'home.collapse': 'Collapse',
    'home.expand': 'Expand',
    'home.all': 'all',
    'home.popular': 'Popular products',
    'home.farmProducts': 'Farm/Eco products',
    'home.sales': 'Sales',
    'home.readyMeals': 'Ready meals and meal plans',
    'home.saveTime': 'Save time on cooking!',
    'home.details': 'Details',
    'home.popularMeals': 'Popular meals',
    'home.mealPlans': 'Meal plans',
    'home.cateringTitle': 'Catering',
    'home.forHome': 'For home',
    'home.forOffice': 'For office',
    'home.themed': 'Themed',
    'home.culinaryClub': 'Culinary Club',
    'home.challengesPrizes': 'Challenges, ratings, prizes',
    'home.stores': 'Stores',
    'home.storesDesc': 'Chain and local',
    'home.farms': 'Farms',
    'home.farmsDesc': 'Fresh from farmers',
    'home.forPets': 'For pets',
    'home.popularPets': 'Popular for pets',
    
    // Referral
    'referral.inviteFriends': 'Invite friends — get bonuses!',
    'referral.title': 'Affiliate Program',
    'referral.description': 'Invite friends and earn bonuses for each one!',
    'referral.yourLink': 'Your link',
    'referral.copy': 'Copy',
    'referral.copied': 'Copied!',
    'referral.share': 'Share',
    'referral.yourStats': 'Your statistics',
    'referral.invited': 'Invited',
    'referral.active': 'Active',
    'referral.earned': 'Earned',
    'referral.bestPartner': 'Best partner',
    'referral.friends': 'friends',
    'referral.goToProgram': 'Learn more about the program',
    
    // Profile
    'profile.settings': 'Settings',
    'profile.premium': 'Premium',
    'profile.orders': 'Orders',
    'profile.addresses': 'Addresses',
    'profile.lists': 'Shopping lists',
    'profile.loyaltyCards': 'Loyalty cards',
    'profile.analytics': 'Analytics',
    'profile.awards': 'Achievements',
    'profile.recipes': 'Recipes',
    'profile.affiliate': 'Affiliate program',
    'profile.family': 'Family',
    'profile.support': 'Support',
    
    // Settings
    'settings.title': 'Settings',
    'settings.account': 'Account settings',
    'settings.name': 'Name',
    'settings.email': 'Email',
    'settings.phone': 'Phone',
    'settings.language': 'Language',
    'settings.notifications': 'Notifications',
    'settings.push': 'Push notifications',
    'settings.emailNotif': 'Email notifications',
    'settings.shoppingReminder': 'Shopping reminders',
    'settings.discountNotify': 'Discount notifications',
    'settings.priceRise': 'Price rise alerts',
    'settings.familyUpdates': 'Family updates',
    'settings.availableFamily': 'Available in Family plan',
    'settings.recommendations': 'Product recommendations',
    'settings.cheapest': 'Cheapest',
    'settings.cheapestDesc': 'Show products with minimum price',
    'settings.previous': 'Previously bought',
    'settings.previousDesc': 'Products from your purchase history',
    'settings.popularOthers': 'Popular with others',
    'settings.popularOthersDesc': 'What other users buy most often',
    'settings.premiumQuality': 'Premium quality',
    'settings.premiumQualityDesc': 'High quality products',
    'settings.eco': 'Eco-friendly',
    'settings.ecoDesc': 'Organic and farm products',
    'settings.showCheaper': 'Show cheaper alternatives',
    'settings.notifyPriceRise': 'Notify about price rises',
    'settings.preferences': 'Shopping preferences',
    'settings.favoriteStores': 'Favorite stores',
    'settings.dietary': 'Dietary restrictions',
    'settings.vegetarian': 'Vegetarian',
    'settings.vegan': 'Vegan',
    'settings.glutenFree': 'Gluten-free',
    'settings.lactoseFree': 'Lactose-free',
    'settings.monthlyBudget': 'Monthly budget',
    'settings.autoPredictions': 'Auto-add predictions',
    'settings.autoPredictionsDesc': 'AI automatically adds frequently purchased items',
    'settings.privacy': 'Privacy',
    'settings.anonymousStats': 'Anonymous statistics',
    'settings.anonymousStatsDesc': 'Helps improve the app',
    'settings.personalRecs': 'Personal recommendations',
    'settings.geolocation': 'Geolocation',
    'settings.geolocationDesc': 'For finding nearest stores',
    'settings.deleteAccount': 'Delete account',
    'settings.subscription': 'Subscription management',
    'settings.currentPlan': 'Current plan',
    'settings.free': 'Free',
    'settings.viewPlans': 'View plans',
    'settings.about': 'About app',
    'settings.termsOfUse': 'Terms of use',
    'settings.privacyPolicy': 'Privacy policy',
    'settings.helpSupport': 'Help and support',
    'settings.personalDataPolicy': 'Personal data policy',
    'settings.publicOffer': 'Public offer',
    'settings.recRules': 'Recommendation rules',
    'settings.contactUs': 'Contact us:',
    
    // Recipes
    'recipes.title': 'Recipes',
    'recipes.your': 'Your recipes',
    'recipes.subscriptions': 'Your subscriptions',
    'recipes.new': 'New recipe',
    'recipes.edit': 'Edit recipe',
    'recipes.noRecipes': "You don't have any recipes yet",
    'recipes.create': 'Create recipe',
    'recipes.noSubscriptions': "You haven't subscribed to anyone yet",
    'recipes.checkRecommended': 'Check out recommended recipes:',
    'recipes.recommended': 'Recommended recipes',
    'recipes.newRecipes': 'New recipes',
    'recipes.recipeName': 'Name',
    'recipes.description': 'Description',
    'recipes.time': 'Time (min)',
    'recipes.servings': 'Servings',
    'recipes.calories': 'Calories',
    'recipes.difficulty': 'Difficulty',
    'recipes.easy': 'Easy',
    'recipes.medium': 'Medium',
    'recipes.hard': 'Hard',
    'recipes.cancel': 'Cancel',
    'recipes.save': 'Save',
    'recipes.loading': 'Loading...',
    'recipes.min': 'min',
    'recipes.addToFavorites': 'Add to favorites',
    'recipes.addIngredients': 'Add ingredients',
    
    // Cart
    'cart.title': 'Cart',
    'cart.empty': 'Cart is empty',
    'cart.total': 'Total',
    'cart.checkout': 'Checkout',
    'cart.clear': 'Clear',
    
    // Common
    'common.loading': 'Loading...',
    'common.error': 'Error',
    'common.success': 'Success',
    'common.cancel': 'Cancel',
    'common.save': 'Save',
    'common.delete': 'Delete',
    'common.edit': 'Edit',
    'common.add': 'Add',
    'common.back': 'Back',
    'common.next': 'Next',
    'common.close': 'Close',
    'common.search': 'Search',
    'common.filter': 'Filter',
    'common.sort': 'Sort',
    'common.all': 'All',
    'common.in': 'in',
    'common.rub': '₽',
  },
  es: {
    // Navigation
    'nav.home': 'Inicio',
    'nav.catalog': 'Catálogo',
    'nav.recipes': 'Recetas',
    'nav.ready': 'Listo',
    'nav.catering': 'Catering',
    'nav.cart': 'Carrito',
    'nav.profile': 'Perfil',
    'nav.favorites': 'Favoritos',
    
    // Header
    'header.delivery': 'Entrega en',
    'header.selectAddress': 'Seleccionar dirección',
    'header.nearestStores': 'Tiendas cercanas',
    
    // Auth
    'auth.login': 'Iniciar sesión',
    'auth.register': 'Registrarse',
    'auth.logout': 'Cerrar sesión',
    'auth.email': 'Correo electrónico',
    'auth.password': 'Contraseña',
    'auth.name': 'Nombre',
    'auth.forgotPassword': '¿Olvidaste tu contraseña?',
    'auth.noAccount': '¿No tienes una cuenta?',
    'auth.hasAccount': '¿Ya tienes una cuenta?',
    'auth.createAccount': 'Crear cuenta',
    'auth.registerSuccess': '¡Registro exitoso!',
    'auth.checkEmail': 'Revisa tu correo para confirmar tu cuenta',
    'auth.error': 'Error',
    'auth.passwordMin': 'La contraseña debe tener al menos 6 caracteres',
    'auth.accountError': 'No se pudo crear la cuenta. Prueba otro correo.',
    'auth.termsAgree': 'Al registrarte, aceptas los',
    'auth.terms': 'términos de servicio',
    'auth.and': 'y la',
    'auth.privacy': 'política de privacidad',
    'auth.creating': 'Creando...',
    
    // Home
    'home.search': 'Buscar productos...',
    'home.savings': 'Ahorros',
    'home.bonuses': 'Bonos',
    'home.available': 'disponible',
    'home.wantMore': 'Quiero más',
    'home.get': 'Obtener',
    'home.yourRecipes': 'Tus recetas',
    'home.andSubscriptions': 'y suscripciones',
    'home.dailyDeals': 'Ofertas del día',
    'home.upTo50': '¡Hasta 50% de descuento en productos populares!',
    'home.view': 'Ver',
    'home.collapse': 'Contraer',
    'home.expand': 'Expandir',
    'home.all': 'todo',
    'home.popular': 'Productos populares',
    'home.farmProducts': 'Productos de granja/Eco',
    'home.sales': 'Ofertas',
    'home.readyMeals': 'Comidas preparadas y planes de alimentación',
    'home.saveTime': '¡Ahorra tiempo cocinando!',
    'home.details': 'Detalles',
    'home.popularMeals': 'Comidas populares',
    'home.mealPlans': 'Planes de alimentación',
    'home.cateringTitle': 'Catering',
    'home.forHome': 'Para casa',
    'home.forOffice': 'Para oficina',
    'home.themed': 'Temáticos',
    'home.culinaryClub': 'Club Culinario',
    'home.challengesPrizes': 'Desafíos, rankings, premios',
    'home.stores': 'Tiendas',
    'home.storesDesc': 'Cadenas y locales',
    'home.farms': 'Granjas',
    'home.farmsDesc': 'Fresco de los agricultores',
    'home.forPets': 'Para mascotas',
    'home.popularPets': 'Popular para mascotas',
    
    // Referral
    'referral.inviteFriends': '¡Invita amigos — obtén bonos!',
    'referral.title': 'Programa de Afiliados',
    'referral.description': '¡Invita amigos y gana bonos por cada uno!',
    'referral.yourLink': 'Tu enlace',
    'referral.copy': 'Copiar',
    'referral.copied': '¡Copiado!',
    'referral.share': 'Compartir',
    'referral.yourStats': 'Tus estadísticas',
    'referral.invited': 'Invitados',
    'referral.active': 'Activos',
    'referral.earned': 'Ganado',
    'referral.bestPartner': 'Mejor socio',
    'referral.friends': 'amigos',
    'referral.goToProgram': 'Más información sobre el programa',
    
    // Profile
    'profile.settings': 'Configuración',
    'profile.premium': 'Premium',
    'profile.orders': 'Pedidos',
    'profile.addresses': 'Direcciones',
    'profile.lists': 'Listas de compras',
    'profile.loyaltyCards': 'Tarjetas de fidelidad',
    'profile.analytics': 'Analíticas',
    'profile.awards': 'Logros',
    'profile.recipes': 'Recetas',
    'profile.affiliate': 'Programa de afiliados',
    'profile.family': 'Familia',
    'profile.support': 'Soporte',
    
    // Settings
    'settings.title': 'Configuración',
    'settings.account': 'Configuración de cuenta',
    'settings.name': 'Nombre',
    'settings.email': 'Correo electrónico',
    'settings.phone': 'Teléfono',
    'settings.language': 'Idioma',
    'settings.notifications': 'Notificaciones',
    'settings.push': 'Notificaciones push',
    'settings.emailNotif': 'Notificaciones por correo',
    'settings.shoppingReminder': 'Recordatorios de compras',
    'settings.discountNotify': 'Notificaciones de descuentos',
    'settings.priceRise': 'Alertas de subida de precios',
    'settings.familyUpdates': 'Actualizaciones familiares',
    'settings.availableFamily': 'Disponible en el plan Familia',
    'settings.recommendations': 'Recomendaciones de productos',
    'settings.cheapest': 'Más baratos',
    'settings.cheapestDesc': 'Mostrar productos con precio mínimo',
    'settings.previous': 'Comprados anteriormente',
    'settings.previousDesc': 'Productos de tu historial de compras',
    'settings.popularOthers': 'Popular entre otros',
    'settings.popularOthersDesc': 'Lo que más compran otros usuarios',
    'settings.premiumQuality': 'Calidad premium',
    'settings.premiumQualityDesc': 'Productos de alta calidad',
    'settings.eco': 'Ecológicos',
    'settings.ecoDesc': 'Productos orgánicos y de granja',
    'settings.showCheaper': 'Mostrar alternativas más baratas',
    'settings.notifyPriceRise': 'Notificar sobre subidas de precio',
    'settings.preferences': 'Preferencias de compra',
    'settings.favoriteStores': 'Tiendas favoritas',
    'settings.dietary': 'Restricciones dietéticas',
    'settings.vegetarian': 'Vegetariano',
    'settings.vegan': 'Vegano',
    'settings.glutenFree': 'Sin gluten',
    'settings.lactoseFree': 'Sin lactosa',
    'settings.monthlyBudget': 'Presupuesto mensual',
    'settings.autoPredictions': 'Auto-añadir predicciones',
    'settings.autoPredictionsDesc': 'La IA añade automáticamente artículos frecuentes',
    'settings.privacy': 'Privacidad',
    'settings.anonymousStats': 'Estadísticas anónimas',
    'settings.anonymousStatsDesc': 'Ayuda a mejorar la aplicación',
    'settings.personalRecs': 'Recomendaciones personales',
    'settings.geolocation': 'Geolocalización',
    'settings.geolocationDesc': 'Para encontrar tiendas cercanas',
    'settings.deleteAccount': 'Eliminar cuenta',
    'settings.subscription': 'Gestión de suscripción',
    'settings.currentPlan': 'Plan actual',
    'settings.free': 'Gratis',
    'settings.viewPlans': 'Ver planes',
    'settings.about': 'Acerca de la app',
    'settings.termsOfUse': 'Términos de uso',
    'settings.privacyPolicy': 'Política de privacidad',
    'settings.helpSupport': 'Ayuda y soporte',
    'settings.personalDataPolicy': 'Política de datos personales',
    'settings.publicOffer': 'Oferta pública',
    'settings.recRules': 'Reglas de recomendación',
    'settings.contactUs': 'Contáctanos:',
    
    // Recipes
    'recipes.title': 'Recetas',
    'recipes.your': 'Tus recetas',
    'recipes.subscriptions': 'Tus suscripciones',
    'recipes.new': 'Nueva receta',
    'recipes.edit': 'Editar receta',
    'recipes.noRecipes': 'Aún no tienes recetas',
    'recipes.create': 'Crear receta',
    'recipes.noSubscriptions': 'Aún no te has suscrito a nadie',
    'recipes.checkRecommended': 'Mira las recetas recomendadas:',
    'recipes.recommended': 'Recetas recomendadas',
    'recipes.newRecipes': 'Nuevas recetas',
    'recipes.recipeName': 'Nombre',
    'recipes.description': 'Descripción',
    'recipes.time': 'Tiempo (min)',
    'recipes.servings': 'Porciones',
    'recipes.calories': 'Calorías',
    'recipes.difficulty': 'Dificultad',
    'recipes.easy': 'Fácil',
    'recipes.medium': 'Medio',
    'recipes.hard': 'Difícil',
    'recipes.cancel': 'Cancelar',
    'recipes.save': 'Guardar',
    'recipes.loading': 'Cargando...',
    'recipes.min': 'min',
    'recipes.addToFavorites': 'Añadir a favoritos',
    'recipes.addIngredients': 'Añadir ingredientes',
    
    // Cart
    'cart.title': 'Carrito',
    'cart.empty': 'El carrito está vacío',
    'cart.total': 'Total',
    'cart.checkout': 'Pagar',
    'cart.clear': 'Limpiar',
    
    // Common
    'common.loading': 'Cargando...',
    'common.error': 'Error',
    'common.success': 'Éxito',
    'common.cancel': 'Cancelar',
    'common.save': 'Guardar',
    'common.delete': 'Eliminar',
    'common.edit': 'Editar',
    'common.add': 'Añadir',
    'common.back': 'Atrás',
    'common.next': 'Siguiente',
    'common.close': 'Cerrar',
    'common.search': 'Buscar',
    'common.filter': 'Filtrar',
    'common.sort': 'Ordenar',
    'common.all': 'Todo',
    'common.in': 'en',
    'common.rub': '₽',
  },
};

export const useI18n = create<I18nState>()(
  persist(
    (set, get) => ({
      language: getSystemLanguage(),
      setLanguage: (lang) => set({ language: lang }),
      t: (key: string) => {
        const lang = get().language;
        return translations[lang][key] || translations.ru[key] || key;
      },
    }),
    {
      name: 'vigodnotut-i18n',
      partialize: (state) => ({
        language: state.language,
      }),
    }
  )
);

// Hook for using translations
export const useTranslation = () => {
  const { language, setLanguage, t } = useI18n();
  return { language, setLanguage, t };
};
